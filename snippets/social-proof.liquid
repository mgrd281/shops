{% comment %}
  Social Proof Component
  Shows real-time activity to build trust and urgency
{% endcomment %}

<div class="social-proof-container">
  <!-- Live Viewers Counter -->
  <div class="social-proof-item viewers-counter">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
      <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z" fill="currentColor"/>
    </svg>
    <span class="viewers-text">
      <strong class="viewers-count">3</strong> Personen schauen sich dies gerade an
    </span>
  </div>

  <!-- Recent Purchase Notification -->
  <div class="social-proof-item recent-purchase" style="display: none;">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#28a745"/>
    </svg>
    <span class="purchase-text">
      <strong class="customer-name">Jemand</strong> hat gerade 
      <strong class="product-name">dieses Produkt</strong> gekauft
    </span>
    <span class="purchase-time">vor 5 Minuten</span>
  </div>

  <!-- Stock Counter -->
  <div class="social-proof-item stock-counter">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
      <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z" fill="#ff6b6b"/>
    </svg>
    <span class="stock-text">
      âš¡ Nur noch <strong class="stock-count">8</strong> auf Lager
    </span>
  </div>

  <!-- Today's Sales -->
  <div class="social-proof-item sales-today">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
      <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" fill="#4169E1"/>
    </svg>
    <span class="sales-text">
      ðŸ”¥ <strong class="sales-count">12</strong> VerkÃ¤ufe heute
    </span>
  </div>
</div>

<style>
  .social-proof-container {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 12px;
    max-width: 350px;
  }

  .social-proof-item {
    background: white;
    border: 1px solid #e5e5e5;
    border-radius: 8px;
    padding: 12px 16px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    gap: 10px;
    animation: slideInLeft 0.5s ease-out;
    transition: all 0.3s ease;
  }

  .social-proof-item:hover {
    transform: translateX(5px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  }

  .social-proof-item svg {
    flex-shrink: 0;
    opacity: 0.8;
  }

  .social-proof-item span {
    font-size: 13px;
    color: #333;
    line-height: 1.4;
  }

  .social-proof-item strong {
    color: #1D4739;
    font-weight: 600;
  }

  .viewers-counter {
    border-left: 3px solid #4169E1;
  }

  .recent-purchase {
    border-left: 3px solid #28a745;
  }

  .stock-counter {
    border-left: 3px solid #ff6b6b;
    background: #fff5f5;
  }

  .sales-today {
    border-left: 3px solid #ff9500;
  }

  .purchase-time {
    font-size: 11px;
    color: #999;
    margin-left: auto;
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @media (max-width: 768px) {
    .social-proof-container {
      left: 10px;
      right: 10px;
      max-width: none;
      bottom: 10px;
    }

    .social-proof-item {
      padding: 10px 12px;
      font-size: 12px;
    }
  }
</style>

<script>
  // Social Proof Logic
  (function() {
    // Random viewers count (3-8)
    function updateViewers() {
      const count = Math.floor(Math.random() * 6) + 3;
      const viewersEl = document.querySelector('.viewers-count');
      if (viewersEl) {
        viewersEl.textContent = count;
      }
    }

    // Show recent purchase notification
    function showRecentPurchase() {
      const purchaseEl = document.querySelector('.recent-purchase');
      if (!purchaseEl) return;

      const names = ['Max M.', 'Anna S.', 'Thomas K.', 'Lisa W.', 'Michael B.'];
      const times = ['vor 2 Minuten', 'vor 5 Minuten', 'vor 8 Minuten', 'vor 12 Minuten'];
      
      const randomName = names[Math.floor(Math.random() * names.length)];
      const randomTime = times[Math.floor(Math.random() * times.length)];
      
      purchaseEl.querySelector('.customer-name').textContent = randomName;
      purchaseEl.querySelector('.purchase-time').textContent = randomTime;
      
      purchaseEl.style.display = 'flex';
      
      setTimeout(() => {
        purchaseEl.style.display = 'none';
      }, 8000);
    }

    // Update stock count
    function updateStock() {
      const count = Math.floor(Math.random() * 8) + 5;
      const stockEl = document.querySelector('.stock-count');
      if (stockEl) {
        stockEl.textContent = count;
      }
    }

    // Update sales today
    function updateSales() {
      const count = Math.floor(Math.random() * 15) + 8;
      const salesEl = document.querySelector('.sales-count');
      if (salesEl) {
        salesEl.textContent = count;
      }
    }

    // Initialize
    updateViewers();
    updateStock();
    updateSales();

    // Update viewers every 30 seconds
    setInterval(updateViewers, 30000);

    // Show purchase notification every 45 seconds
    setInterval(showRecentPurchase, 45000);
    setTimeout(showRecentPurchase, 10000); // First show after 10s

    // Update stock every 2 minutes
    setInterval(updateStock, 120000);

    // Update sales every 5 minutes
    setInterval(updateSales, 300000);
  })();
</script>
